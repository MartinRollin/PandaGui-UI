<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="mobile-web-app-capable" content="yes" />
    <link rel="stylesheet" type="text/css" href="css/PageTest2.css" />
    <link rel="stylesheet" type="text/css" href="css/style.css" />
    <script src="http://code.jquery.com/jquery-1.5.min.js"></script>
    <script type="text/javascript" src="scripts/script.js"></script>
    <script
      type="text/javascript"
      src="http://latex.codecogs.com/latexit.js"
    ></script>
  </head>
  <body onload="init();">
    <span class="bouton"><a href="index.html">redirection</a></span>
    <div
      id="draggable"
      draggable="true"
      ondragstart="event.dataTransfer.setData('text/plain',null)"
    >
      This div is draggable
    </div>
    <div class="dropzone" dropzone="move"></div>
    <div class="dropzone" dropzone="move"></div>

    <div id="Texte" class="Texte" draggable="true">
      <button
        class="favorite styled"
        type="button"
        onclick="let partie = new PartieDraggable();"
      >
        Ajouter une div
      </button>
      « Texte » est issu du mot latin « textum », dérivé du verbe « texere » qui
      signifie « tisser ». Le mot s'applique à l'entrelacement des fibres
      utilisées dans le tissage, voir par exemple Ovide : « Quo super iniecit
      textum rude sedula Baucis = (un siège) sur lequel Baucis empressée avait
      jeté un tissu grossier »2 ou au tressage (exemple chez Martial « Vimineum
      textum = panier d'osier tressé »). Le verbe a aussi le sens large de
      construire comme dans « basilicam texere = construire une basilique » chez
      Cicéron3.
    </div>
    <div
      class="elementDraggable"
      draggable="true"
      ondragstart="dragstart_handler(event);"
    >
      <button type="button" class="collapsible">
        Joint states
      </button>
      <div class="content">
        <div class="jointPosition" draggable="true">
          <button type="button" class="collapsible">
            <dd>Joint position</dd>
          </button>
          <div class="content">
            <br />
            <div class="sliders">
              <input
                min="-2.89"
                max="2.89"
                value="0"
                step="0.01"
                class="slider"
                id="q0_slider"
                oninput="q0_slider.value = q0_value.value"
                type="range"
              />
              <output class="slider_name" lang="latex">
                \boldsymbol{q_0}
              </output>
              <output class="slider_min_val" id="q0_min_value"> -2.89</output>
              <output class="slider_max_val" id="q0_max_value"> 2.89</output>
              <output class="slider_val" id="q0_value"> val</output>
            </div>
            <div class="sliders">
              <input
                min="-1.76"
                max="1.76"
                value="0"
                step="0.01"
                class="slider"
                id="q1_slider"
                oninput="q1_slider.value = q1_value.value"
                type="range"
              />
              <output class="slider_name" lang="latex">
                \boldsymbol{q_1}
              </output>
              <output class="slider_min_val" id="q1_min_value"> -1.76</output>
              <output class="slider_max_val" id="q1_max_value">1.76 </output>
              <output class="slider_val" id="q1_value"></output>
            </div>
            <div class="sliders">
              <input
                min="-2.89"
                max="2.89"
                value="0"
                step="0.01"
                class="slider"
                id="q2_slider"
                oninput="q2_slider.value = q2_value.value"
                type="range"
              />
              <output class="slider_name" lang="latex">
                \boldsymbol{q_2}
              </output>
              <output class="slider_min_val" id="q2_min_value"> -1.76</output>
              <output class="slider_max_val" id="q2_max_value">1.76 </output>
              <output class="slider_val" id="q2_value"></output>
            </div>
            <div class="sliders">
              <input
                min="-3.07"
                max="-0.07"
                value="0"
                step="0.01"
                class="slider"
                id="q3_slider"
                oninput="q3_slider.value = q3_value.value"
                type="range"
              />
              <output class="slider_name" lang="latex">
                \boldsymbol{q_3}
              </output>
              <output class="slider_val" id="q3_value"></output>
              <output class="slider_min_val" id="q3_min_value"> -3.07</output>
              <output class="slider_max_val" id="q3_max_value">-0.07 </output>
            </div>
            <div class="sliders">
              <input
                min="-2.89"
                max="2.89"
                value="0"
                step="0.01"
                class="slider"
                id="q4_slider"
                oninput="q4_slider.value = q4_value.value"
                type="range"
              />
              <output class="slider_name" lang="latex">
                \boldsymbol{q_4}
              </output>
              <output class="slider_val" id="q4_value"></output>
              <output class="slider_min_val" id="q4_min_value"> -2.89</output>
              <output class="slider_max_val" id="q4_max_value"> 2.89 </output>
            </div>
            <div class="sliders">
              <input
                min="-0.01"
                max="3.75"
                value="0"
                step="0.01"
                class="slider"
                id="q5_slider"
                oninput="q5_slider.value = q5_value.value"
                type="range"
              />
              <output class="slider_name" lang="latex">
                \boldsymbol{q_5}
              </output>
              <output class="slider_val" id="q5_value"></output>
              <output class="slider_min_val" id="q5_min_value">-0.01</output>
              <output class="slider_max_val" id="q5_max_value"> 3.75 </output>
            </div>
            <div class="sliders">
              <input
                min="-2.89"
                max="2.89"
                value="0"
                step="0.01"
                class="slider"
                id="q6_slider"
                oninput="q6_slider.value = q6_value.value"
                type="range"
              />
              <output class="slider_name" lang="latex">
                \boldsymbol{q_6}
              </output>
              <output class="slider_val" id="q6_value"></output>
              <output class="slider_min_val" id="q6_min_value">-2.89</output>
              <output class="slider_max_val" id="q6_max_value"> 2.89 </output>
            </div>
            <br />
          </div>
        </div>
      </div>
    </div>
  </body>
  <script type="text/javascript">
    document.getElementById("Texte").addEventListener("onclick", function() {
      alert("hello");
    });
    function dragstart_handler(ev) {
      // On ajoute l'identifiant de l'élément cible à l'objet de transfert
      ev.dataTransfer.setData("text/plain", ev.target.innerText);
    }

    var dragged;

    /* events fired on the draggable target */
    document.addEventListener("drag", function(event) {}, false);

    document.addEventListener(
      "dragstart",
      function(event) {
        // store a ref. on the dragged elem
        dragged = event.target;
        // make it half transparent
        event.target.style.opacity = 0.5;
      },
      false
    );

    document.addEventListener(
      "dragend",
      function(event) {
        // reset the transparency
        event.target.style.opacity = "";
      },
      false
    );

    /* events fired on the drop targets */
    document.addEventListener(
      "dragover",
      function(event) {
        // prevent default to allow drop
        event.preventDefault();
      },
      false
    );

    document.addEventListener(
      "dragenter",
      function(event) {
        // highlight potential drop target when the draggable element enters it
        if (event.target.className == "dropzone") {
          event.target.style.background = "purple";
        }
      },
      false
    );

    document.addEventListener(
      "dragleave",
      function(event) {
        // reset background of potential drop target when the draggable element leaves it
        if (event.target.className == "dropzone") {
          event.target.style.background = "";
        }
      },
      false
    );

    document.addEventListener(
      "drop",
      function(event) {
        // prevent default action (open as link for some elements)
        event.preventDefault();
        // move dragged elem to the selected drop target
        if (event.target.className == "dropzone") {
          event.target.style.background = "";
          dragged.parentNode.removeChild(dragged);
          console.log(dragged);
          event.target.appendChild(dragged);
        }
      },
      false
    );
  </script>

  <script>
    var coll = document.getElementsByClassName("collapsible");
    var i;

    for (i = 0; i < coll.length; i++) {
      coll[i].addEventListener("click", function() {
        this.classList.toggle("active");
        var content = this.nextElementSibling;
        if (content.style.display === "block") {
          content.style.display = "none";
        } else {
          content.style.display = "block";
        }
      });
    }
  </script>

  <script>
    function init() {
      var coll = document.getElementsByClassName("elementDraggable");

      for (let i = 0; i < coll.length; i++) {
        document.getElementsByClassName("dropzone")[0].appendChild(coll[i]);
      }
    }
  </script>

  <script>
    function PartieDraggable() {
      var newDiv = document.createElement("div");
      newDiv.innerText = "Ceci est une nouvelle partie";
      newDiv.draggable = true;
      document.getElementsByClassName("dropzone")[0].appendChild(newDiv);
    }
  </script>
</html>
