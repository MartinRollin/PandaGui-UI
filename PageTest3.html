<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="mobile-web-app-capable" content="yes" />
    <link rel="stylesheet" type="text/css" href="css/style.css" />
    <script src="http://code.jquery.com/jquery-1.5.min.js"></script>
    <script type="text/javascript" src="scripts/script.js"></script>
    <script
      type="text/javascript"
      src="http://latex.codecogs.com/latexit.js"
    ></script>
  </head>
  <style>
    #mydiv {
      position: absolute;
      z-index: 9;
      background-color: #f1f1f1;
      text-align: center;
      border: 1px solid #d3d3d3;
    }
    #jointState {
      position: absolute;
      z-index: 9;
      background-color: #f1f1f1;
      text-align: center;
      border: 1px solid #d3d3d3;
    }
    #jointStateHeader {
      cursor: move;
      z-index: 10;
    }
    #mydivheader {
      padding: 10px;
      cursor: move;
      z-index: 10;
      background-color: #2196f3;
      color: #fff;
    }
    .toggleBar {
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      width: 550px;
      background-color: #777;
      border-bottom: solid 1px #666;
      color: white;
      font-size: 15px;
      text-align: left;
    }
    .Header {
      padding: 15px;
    }
  </style>
  <body>
    <h1>Draggable DIV Element</h1>

    <p>Click and hold the mouse button down while moving the DIV element</p>

    <div id="mydiv">
      <div id="mydivheader">
        Click here to move
      </div>
      <p>Move</p>
      <p>this</p>
      <p>DIV</p>
    </div>

    <div id="jointState">
      <div id="jointStateHeader" class="toggleBar">
        <span class="Header"> Joint states </span>
        <button type="button" class="collapsible">
          Joint states
        </button>
      </div>
      <div class="content">
        <div class="jointPosition">
          <div id="jointPositionHeader" class="toggleBar">
            <span class="Header"> Joint position </span>
            <button type="button" class="collapsible">
              <dd>Joint position</dd>
            </button>
          </div>
          <div class="content">
            <br />
            <div class="sliders">
              <input
                min="-2.89"
                max="2.89"
                value="0"
                step="0.01"
                class="slider"
                id="q0_slider"
                oninput="q0_slider.value = q0_value.value"
                type="range"
              />
              <output class="slider_name" lang="latex">
                \boldsymbol{q_0}
              </output>
              <output class="slider_min_val" id="q0_min_value"> -2.89</output>
              <output class="slider_max_val" id="q0_max_value"> 2.89</output>
              <output class="slider_val" id="q0_value"> val</output>
            </div>
            <div class="sliders">
              <input
                min="-1.76"
                max="1.76"
                value="0"
                step="0.01"
                class="slider"
                id="q1_slider"
                oninput="q1_slider.value = q1_value.value"
                type="range"
              />
              <output class="slider_name" lang="latex">
                \boldsymbol{q_1}
              </output>
              <output class="slider_min_val" id="q1_min_value"> -1.76</output>
              <output class="slider_max_val" id="q1_max_value">1.76 </output>
              <output class="slider_val" id="q1_value"></output>
            </div>
            <div class="sliders">
              <input
                min="-2.89"
                max="2.89"
                value="0"
                step="0.01"
                class="slider"
                id="q2_slider"
                oninput="q2_slider.value = q2_value.value"
                type="range"
              />
              <output class="slider_name" lang="latex">
                \boldsymbol{q_2}
              </output>
              <output class="slider_min_val" id="q2_min_value"> -1.76</output>
              <output class="slider_max_val" id="q2_max_value">1.76 </output>
              <output class="slider_val" id="q2_value"></output>
            </div>
            <div class="sliders">
              <input
                min="-3.07"
                max="-0.07"
                value="0"
                step="0.01"
                class="slider"
                id="q3_slider"
                oninput="q3_slider.value = q3_value.value"
                type="range"
              />
              <output class="slider_name" lang="latex">
                \boldsymbol{q_3}
              </output>
              <output class="slider_val" id="q3_value"></output>
              <output class="slider_min_val" id="q3_min_value"> -3.07</output>
              <output class="slider_max_val" id="q3_max_value">-0.07 </output>
            </div>
            <div class="sliders">
              <input
                min="-2.89"
                max="2.89"
                value="0"
                step="0.01"
                class="slider"
                id="q4_slider"
                oninput="q4_slider.value = q4_value.value"
                type="range"
              />
              <output class="slider_name" lang="latex">
                \boldsymbol{q_4}
              </output>
              <output class="slider_val" id="q4_value"></output>
              <output class="slider_min_val" id="q4_min_value"> -2.89</output>
              <output class="slider_max_val" id="q4_max_value"> 2.89 </output>
            </div>
            <div class="sliders">
              <input
                min="-0.01"
                max="3.75"
                value="0"
                step="0.01"
                class="slider"
                id="q5_slider"
                oninput="q5_slider.value = q5_value.value"
                type="range"
              />
              <output class="slider_name" lang="latex">
                \boldsymbol{q_5}
              </output>
              <output class="slider_val" id="q5_value"></output>
              <output class="slider_min_val" id="q5_min_value">-0.01</output>
              <output class="slider_max_val" id="q5_max_value"> 3.75 </output>
            </div>
            <div class="sliders">
              <input
                min="-2.89"
                max="2.89"
                value="0"
                step="0.01"
                class="slider"
                id="q6_slider"
                oninput="q6_slider.value = q6_value.value"
                type="range"
              />
              <output class="slider_name" lang="latex">
                \boldsymbol{q_6}
              </output>
              <output class="slider_val" id="q6_value"></output>
              <output class="slider_min_val" id="q6_min_value">-2.89</output>
              <output class="slider_max_val" id="q6_max_value"> 2.89 </output>
            </div>
            <br />
          </div>
        </div>
      </div>
    </div>

    <script>
      //Make the DIV element draggagle:
      dragElement(document.getElementById("mydiv"));
      dragElement(document.getElementById("jointState"));

      function dragElement(elmnt) {
        var pos1 = 0,
          pos2 = 0,
          pos3 = 0,
          pos4 = 0;
        if (document.getElementById(elmnt.id + "Header")) {
          /* if present, the header is where you move the DIV from:*/
          document.getElementById(
            elmnt.id + "Header"
          ).onmousedown = dragMouseDown;
        } else {
          /* otherwise, move the DIV from anywhere inside the DIV:*/
          elmnt.onmousedown = dragMouseDown;
        }

        function dragMouseDown(e) {
          e = e || window.event;
          e.preventDefault();
          // get the mouse cursor position at startup:
          pos3 = e.clientX;
          pos4 = e.clientY;
          document.onmouseup = closeDragElement;
          // call a function whenever the cursor moves:
          document.onmousemove = elementDrag;
        }

        function elementDrag(e) {
          e = e || window.event;
          e.preventDefault();
          // calculate the new cursor position:
          pos1 = pos3 - e.clientX;
          pos2 = pos4 - e.clientY;
          pos3 = e.clientX;
          pos4 = e.clientY;
          // set the element's new position:
          if (elmnt.offsetTop >= -10) {
            elmnt.style.top = elmnt.offsetTop - pos2 + "px";
          } else {
            elmnt.style.top = -10 + "px";
          }
          if (elmnt.offsetLeft >= -350) {
            // if (elmnt.offsetLeft <= window.outerWidth - elmnt.offsetWidth) {
            elmnt.style.left = elmnt.offsetLeft - pos1 + "px";
            // } else {
            // elmnt.style.left = window.outerWidth - elmnt.offsetWidth;
            // }
          } else {
            elmnt.style.left = -350 + "px";
          }
        }

        function closeDragElement() {
          /* stop moving when mouse button is released:*/
          document.onmouseup = null;
          document.onmousemove = null;
        }
      }
    </script>

    <script>
      var coll = document.getElementsByClassName("collapsible");
      var i;

      for (i = 0; i < coll.length; i++) {
        coll[i].addEventListener("click", function() {
          this.parentNode.classList.toggle("active");
          var content = this.parentNode.nextElementSibling;

          if (content.style.display === "block") {
            content.style.display = "none";
          } else {
            content.style.display = "block";
          }
          console.log();
          var content = this.parentNode.nextElementSibling;
        });
      }
    </script>

    <!-- Test pour Ã©crire les positions dans un fichier -->
    <script>
      var fs = require("fs");
      fs.appendFile("mynewfile1.txt", "Hello content!", function(err) {
        if (err) throw err;
        console.log("Saved!");
      });
    </script>
  </body>
</html>
